µ
oC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix.ML.Api\Controllers\MoviePredictionController.cs
	namespace 	
FindYourFlix
 
. 
ML 
. 
Api 
. 
Controllers )
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 %
MoviePredictionController		 *
:		+ ,
ControllerBase		- ;
{

 
private 
readonly  
PredictionEnginePool -
<- .

ModelInput. 8
,8 9
ModelOutput: E
>E F
predictionEngineG W
;W X
public %
MoviePredictionController (
(( ) 
PredictionEnginePool) =
<= >

ModelInput> H
,H I
ModelOutputJ U
>U V
predictionEngineW g
)h i
{ 	
this 
. 
predictionEngine !
=" #
predictionEngine$ 4
;4 5
} 	
[ 	
HttpPost	 
] 
public 
ActionResult 
< 
float !
>! "
Predict# *
(* +
[+ ,
FromBody, 4
]4 5

ModelInput6 @
modelA F
)F G
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "

ModelState" ,
), -
;- .
} 
ModelOutput 
output 
=  
predictionEngine! 1
.1 2
Predict2 9
(9 :
	modelName: C
:C D
$strE [
,[ \
example] d
:d e
modelf k
)k l
;l m
return 
Ok 
( 
output 
. 
Score "
)" #
;# $
} 	
} 
} à
YC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix.ML.Api\Data\ModelInput.cs
	namespace 	
FindYourFlix
 
. 
ML 
. 
Api 
. 
Data "
{ 
public 

class 

ModelInput 
{ 
[ 	

ColumnName	 
( 
$str 
) 
] 
public 
float 
UserId 
{ 
get !
;! "
set# &
;& '
}( )
[

 	

ColumnName

	 
(

 
$str

 
)

 
]

  
public 
float 
MovieId 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} û
ZC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix.ML.Api\Data\ModelOutput.cs
	namespace 	
FindYourFlix
 
. 
ML 
. 
Api 
. 
Data "
{ 
public 

class 
ModelOutput 
{ 
public 
float 
Score 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ê

QC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix.ML.Api\Program.cs
	namespace

 	
FindYourFlix


 
.

 
ML

 
.

 
Api

 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ú
QC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix.ML.Api\Startup.cs
	namespace 	
FindYourFlix
 
. 
ML 
. 
Api 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services   
.   
AddControllers   #
(  # $
)  $ %
;  % &
services"" 
."" #
AddPredictionEnginePool"" ,
<"", -

ModelInput""- 7
,""7 8
ModelOutput""9 D
>""D E
(""E F
)""F G
.## 
FromFile## 
(## 
	modelName## 
:## 
$str## /
,##/ 0
filePath$$ 
:$$ 
$str$$ !
,$$! "
watchForChanges$$# 2
:$$2 3
true$$4 8
)$$8 9
;$$9 :
services'' 
.'' 
AddSwaggerGen'' "
(''" #
c''# $
=>''% '
{(( 
c)) 
.)) 

SwaggerDoc)) 
()) 
$str)) !
,))! "
new))# &
OpenApiInfo))' 2
{))3 4
Title))5 :
=)); <
$str))= R
,))R S
Version))T [
=))\ ]
$str))^ b
}))c d
)))d e
;))e f
}** 
)** 
;** 
}++ 	
public.. 
void.. 
	Configure.. 
(.. 
IApplicationBuilder.. 1
app..2 5
,..5 6
IWebHostEnvironment..7 J
env..K N
)..N O
{// 	
if00 
(00 
env00 
.00 
IsDevelopment00 !
(00! "
)00" #
)00# $
{11 
app22 
.22 %
UseDeveloperExceptionPage22 -
(22- .
)22. /
;22/ 0
app33 
.33 

UseSwagger33 
(33 
)33  
;33  !
app44 
.44 
UseSwaggerUI44  
(44  !
c44! "
=>44# %
c44& '
.44' (
SwaggerEndpoint44( 7
(447 8
$str448 R
,44R S
$str44T l
)44l m
)44m n
;44n o
}55 
app77 
.77 
UseHttpsRedirection77 #
(77# $
)77$ %
;77% &
app99 
.99 

UseRouting99 
(99 
)99 
;99 
app;; 
.;; 
UseAuthorization;;  
(;;  !
);;! "
;;;" #
app== 
.== 
UseEndpoints== 
(== 
	endpoints== &
=>==' )
{>> 
	endpoints?? 
.?? 
MapControllers?? (
(??( )
)??) *
;??* +
}@@ 
)@@ 
;@@ 
}AA 	
}BB 
}CC 
§V
UC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\ApplicationContext.cs
	namespace 	
FindYourFlix
 
{ 
public 

class 
ApplicationContext #
:$ %
	DbContext& /
{ 
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public		 
DbSet		 
<		 

LikedMovie		 
>		  

LikedMovie		! +
{		, -
get		. 1
;		1 2
set		3 6
;		6 7
}		8 9
public

 
DbSet

 
<

 
Movie

 
>

 
Movies

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
DbSet 
< 
Genre 
> 
Genres "
{# $
get% (
;( )
set* -
;- .
}/ 0
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
{ 	
optionsBuilder 
. 
UseSqlServer '
(' (
$str( u
)u v
;v w
} 	
public 
ApplicationContext !
(! "
DbContextOptions" 2
<2 3
ApplicationContext3 E
>E F
optionsG N
)N O
:P Q
baseR V
(V W
optionsW ^
)^ _
{ 	
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
var 
likedMovies 
= 
modelBuilder *
.* +
Entity+ 1
<1 2

LikedMovie2 <
>< =
(= >
)> ?
;? @
likedMovies 
. 
ToTable 
(  
$str  -
)- .
;. /
likedMovies 
. 
HasIndex  
(  !
e! "
=># %
e& '
.' (
Id( *
)* +
;+ ,
likedMovies 
. 
Property  
(  !
e! "
=># %
e& '
.' (
Id( *
)* +
.+ ,
HasMaxLength, 8
(8 9
$num9 ;
); <
;< =
likedMovies 
. 
HasOne 
( 
e  
=>! #
e$ %
.% &
User& *
)* +
. 
WithMany 
( 
e 
=> 
e  
.  !
LikedMovies! ,
), -
. 
HasForeignKey 
( 
e  
=>! #
e$ %
.% &
UserId& ,
), -
;- .
likedMovies   
.   
HasOne   
(   
e    
=>  ! #
e  $ %
.  % &
Movie  & +
)  + ,
.!! 
WithMany!! 
(!! 
e!! 
=>!! 
e!!  
.!!  !
LikedMovies!!! ,
)!!, -
."" 
HasForeignKey"" 
("" 
e""  
=>""! #
e""$ %
.""% &
MovieId""& -
)""- .
;"". /
var$$ 
users$$ 
=$$ 
modelBuilder$$ $
.$$$ %
Entity$$% +
<$$+ ,
User$$, 0
>$$0 1
($$1 2
)$$2 3
;$$3 4
users%% 
.%% 
ToTable%% 
(%% 
$str%% !
)%%! "
;%%" #
users&& 
.&& 
HasIndex&& 
(&& 
e&& 
=>&& 
e&&  !
.&&! "
Id&&" $
)&&$ %
;&&% &
users'' 
.'' 
Property'' 
('' 
e'' 
=>'' 
e''  !
.''! "
Id''" $
)''$ %
.''% &
HasMaxLength''& 2
(''2 3
$num''3 5
)''5 6
;''6 7
users(( 
.(( 
Property(( 
((( 
e(( 
=>(( 
e((  !
.((! "
	FirstName((" +
)((+ ,
.((, -
HasMaxLength((- 9
(((9 :
$num((: <
)((< =
;((= >
users)) 
.)) 
Property)) 
()) 
e)) 
=>)) 
e))  !
.))! "
LastName))" *
)))* +
.))+ ,
HasMaxLength)), 8
())8 9
$num))9 ;
))); <
;))< =
users** 
.** 
Property** 
(** 
e** 
=>** 
e**  !
.**! "
Email**" '
)**' (
.**( )
HasMaxLength**) 5
(**5 6
$num**6 9
)**9 :
;**: ;
users++ 
.++ 
Property++ 
(++ 
e++ 
=>++ 
e++  !
.++! "
UserName++" *
)++* +
.+++ ,
HasMaxLength++, 8
(++8 9
$num++9 ;
)++; <
;++< =
users,, 
.,, 
Property,, 
(,, 
e,, 
=>,, 
e,,  !
.,,! "
InsertedDate,," .
),,. /
.,,/ 0
HasDefaultValueSql,,0 B
(,,B C
$str,,C Q
),,Q R
;,,R S
users-- 
.-- 
Property-- 
(-- 
e-- 
=>-- 
e--  !
.--! "
Password--" *
)--* +
;--+ ,
var// 
movies// 
=// 
modelBuilder// %
.//% &
Entity//& ,
<//, -
Movie//- 2
>//2 3
(//3 4
)//4 5
;//5 6
movies00 
.00 
ToTable00 
(00 
$str00 #
)00# $
;00$ %
movies11 
.11 
HasIndex11 
(11 
e11 
=>11  
e11! "
.11" #
Id11# %
)11% &
;11& '
movies22 
.22 
Property22 
(22 
e22 
=>22  
e22! "
.22" #
Id22# %
)22% &
.22& '
HasMaxLength22' 3
(223 4
$num224 6
)226 7
;227 8
movies33 
.33 
Property33 
(33 
e33 
=>33  
e33! "
.33" #
Name33# '
)33' (
.33( )
HasMaxLength33) 5
(335 6
$num336 9
)339 :
;33: ;
var55 
genres55 
=55 
modelBuilder55 %
.55% &
Entity55& ,
<55, -
Genre55- 2
>552 3
(553 4
)554 5
;555 6
genres66 
.66 
ToTable66 
(66 
$str66 #
)66# $
;66$ %
genres77 
.77 
HasIndex77 
(77 
e77 
=>77  
e77! "
.77" #
Id77# %
)77% &
;77& '
genres88 
.88 
Property88 
(88 
e88 
=>88  
e88! "
.88" #
Id88# %
)88% &
.88& '
HasMaxLength88' 3
(883 4
$num884 6
)886 7
;887 8
genres99 
.99 
Property99 
(99 
e99 
=>99  
e99! "
.99" #
Name99# '
)99' (
.99( )
HasMaxLength99) 5
(995 6
$num996 8
)998 9
;999 :
genres:: 
.:: 
HasOne:: 
(:: 
e:: 
=>:: 
e::  
.::  !
Movie::! &
)::& '
.;; 
WithMany;; 
(;; 
e;; 
=>;; 
e;;  
.;;  !
Genres;;! '
);;' (
.<< 
HasForeignKey<< 
(<< 
e<<  
=><<! #
e<<$ %
.<<% &
MovieId<<& -
)<<- .
;<<. /
var>> 
tags>> 
=>> 
modelBuilder>> #
.>># $
Entity>>$ *
<>>* +
Tag>>+ .
>>>. /
(>>/ 0
)>>0 1
;>>1 2
tags?? 
.?? 
ToTable?? 
(?? 
$str?? 
)??  
;??  !
tags@@ 
.@@ 
HasIndex@@ 
(@@ 
e@@ 
=>@@ 
e@@  
.@@  !
Id@@! #
)@@# $
;@@$ %
tagsAA 
.AA 
PropertyAA 
(AA 
eAA 
=>AA 
eAA  
.AA  !
IdAA! #
)AA# $
.AA$ %
HasMaxLengthAA% 1
(AA1 2
$numAA2 4
)AA4 5
;AA5 6
tagsBB 
.BB 
PropertyBB 
(BB 
eBB 
=>BB 
eBB  
.BB  !
NameBB! %
)BB% &
.BB& '
HasMaxLengthBB' 3
(BB3 4
$numBB4 7
)BB7 8
;BB8 9
tagsCC 
.CC 
PropertyCC 
(CC 
eCC 
=>CC 
eCC  
.CC  !
InsertedDateCC! -
)CC- .
.CC. /
HasDefaultValueSqlCC/ A
(CCA B
$strCCB P
)CCP Q
;CCQ R
tagsDD 
.DD 
HasOneDD 
(DD 
eDD 
=>DD 
eDD 
.DD 
UserDD #
)DD# $
.EE 
WithManyEE 
(EE 
eEE 
=>EE 
eEE  
.EE  !
TagsEE! %
)EE% &
.FF 
HasForeignKeyFF 
(FF 
eFF  
=>FF! #
eFF$ %
.FF% &
UserIdFF& ,
)FF, -
;FF- .
tagsGG 
.GG 
HasOneGG 
(GG 
eGG 
=>GG 
eGG 
.GG 
MovieGG $
)GG$ %
.HH 
WithManyHH 
(HH 
eHH 
=>HH 
eHH  
.HH  !
TagsHH! %
)HH% &
.II 
HasForeignKeyII 
(II 
eII  
=>II! #
eII$ %
.II% &
MovieIdII& -
)II- .
;II. /
}KK 	
}LL 
}MM 
YC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\JwtMiddleware.cs
	namespace 	
FindYourFlix
 
. 
Business 
{ 
public 

class 
JwtMiddleware 
{		 
private

 
readonly

 
RequestDelegate

 (
_next

) .
;

. /
private 
readonly 
HttpContext $
_context% -
;- .
public 
JwtMiddleware 
( 
HttpContext (
context) 0
)0 1
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
Invoke  
(  !
)! "
{ 	
var 
token 
= 
_context  
.  !
Request! (
.( )
Headers) 0
[0 1
$str1 @
]@ A
.A B
FirstOrDefaultB P
(P Q
)Q R
?R S
.S T
SplitT Y
(Y Z
$strZ ]
)] ^
.^ _
Last_ c
(c d
)d e
;e f
await 
_next 
( 
_context  
)  !
;! "
} 	
} 
} £&
\C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Movies\MovieList.cs
	namespace 	
FindYourFlix
 
. 
Business 
.  
Movies  &
{		 
public

 

class

 
	MovieList

 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
private 
readonly 
	IUserInfo "
	_userInfo# ,
;, -
public 
	MovieList 
( 
IRepository $

repository% /
,/ 0
	IUserInfo1 :
userInfo; C
)C D
{ 	
_repository 
= 

repository $
;$ %
	_userInfo 
= 
userInfo  
;  !
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Model& +
>+ ,
>, -
Select. 4
(4 5
)5 6
{ 	
var 
userId 
= 
await 
	_userInfo (
.( )
	GetUserId) 2
(2 3
)3 4
;4 5
var 
movies 
= 
await 
_repository *
.* +
Query+ 0
<0 1
Movie1 6
>6 7
(7 8
)8 9
. 
Select 
( 
e 
=> 
new  
Model! &
(& '
)' (
{ 
Id 
= 
e 
. 
Id 
, 
Name 
= 
e 
. 
Name !
,! "
Genres 
= 
e 
. 
Genres %
.% &
Select& ,
(, -
g- .
=>/ 1
g2 3
.3 4
Name4 8
)8 9
.9 :
ToList: @
(@ A
)A B
,B C
IsLiked 
= 
e 
.  
LikedMovies  +
.+ ,
Any, /
(/ 0
m0 1
=>2 4
m5 6
.6 7
MovieId7 >
==? A
eB C
.C D
IdD F
&&G I
mJ K
.K L
UserIdL R
==S U
userIdV \
)\ ]
,] ^
Tags   
=   
e   
.   
Tags   !
.  ! "
Select  " (
(  ( )
x  ) *
=>  + -
new  . 1
TagModel  2 :
{!! 
Name"" 
="" 
x""  
.""  !
Name""! %
,""% &
Id## 
=## 
x## 
.## 
Id## !
,##! "

IsUsersTag$$ "
=$$# $
x$$% &
.$$& '
UserId$$' -
==$$. 0
userId$$1 7
}%% 
)%% 
.%% 
ToList%% 
(%% 
)%% 
}&& 
)&& 
.&& 
ToListAsync&& 
(&& 
)&&  
;&&  !
return(( 
movies(( 
;(( 
})) 	
public++ 
class++ 
Model++ 
{,, 	
public-- 
string-- 
Id-- 
{-- 
get-- "
;--" #
set--$ '
;--' (
}--) *
public.. 
string.. 
Name.. 
{..  
get..! $
;..$ %
set..& )
;..) *
}..+ ,
public// 
bool// 
IsLiked// 
{//  !
get//" %
;//% &
set//' *
;//* +
}//, -
public00 
List00 
<00 
string00 
>00 
Genres00  &
{00' (
get00) ,
;00, -
set00. 1
;001 2
}003 4
public11 
List11 
<11 
TagModel11  
>11  !
Tags11" &
{11' (
get11) ,
;11, -
set11. 1
;111 2
}113 4
}22 	
public44 
class44 
TagModel44 
{55 	
public66 
string66 
Id66 
{66 
get66 "
;66" #
set66$ '
;66' (
}66) *
public77 
string77 
Name77 
{77  
get77! $
;77$ %
set77& )
;77) *
}77+ ,
public88 
bool88 

IsUsersTag88 "
{88# $
get88% (
;88( )
set88* -
;88- .
}88/ 0
}99 	
}:: 
};; ô
^C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Movies\MovieSelect.cs
	namespace 	
FindYourFlix
 
. 
Business 
.  
Movies  &
{		 
public

 

class

 
MovieSelect

 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
public 
MovieSelect 
( 
IRepository &

repository' 1
)1 2
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
< 
Model 
>  
Select! '
(' (
string( .
id/ 1
)1 2
{ 	
var 
movie 
= 
await 
_repository *
.* +
Query+ 0
<0 1
Movie1 6
>6 7
(7 8
)8 9
. 
Where 
( 
e 
=> 
e 
. 
Id  
==! #
id$ &
)& '
. 
Select 
( 
e 
=> 
new  
Model! &
{ 
Name 
= 
e 
. 
Name !
,! "
Genres 
= 
e 
. 
Genres %
.% &
Select& ,
(, -
g- .
=>/ 1
g2 3
.3 4
Name4 8
)8 9
.9 :
ToList: @
(@ A
)A B
} 
) 
. 
FirstOrDefaultAsync $
($ %
)% &
;& '
return 
movie 
; 
} 	
public!! 
class!! 
Model!! 
{"" 	
public## 
string## 
Name## 
{##  
get##! $
;##$ %
set##& )
;##) *
}##+ ,
public$$ 
List$$ 
<$$ 
string$$ 
>$$ 
Genres$$  &
{$$' (
get$$) ,
;$$, -
set$$. 1
;$$1 2
}$$3 4
}%% 	
}&& 
}'' Ù
ZC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Tags\TagDelete.cs
	namespace		 	
FindYourFlix		
 
.		 
Business		 
.		  
Tags		  $
{

 
public 

class 
	TagDelete 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
public 
	TagDelete 
( 
IRepository $

repository% /
)/ 0
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
Delete  
(  !
string! '
id( *
)* +
{ 	
if 
( 
await 
_repository !
.! "
Query" '
<' (
Tag( +
>+ ,
(, -
)- .
. 
Where 
( 
e 
=> 
e 
. 
Id  
==! #
id$ &
)& '
. 
FirstOrDefaultAsync $
($ %
)% &
==' )
null* .
). /
{ 
throw 
new #
ObjectNotFoundException 1
(1 2
$"2 4
$str4 A
{A B
idB D
}D E
$strE U
"U V
)V W
;W X
} 
_repository 
. 
Delete 
< 
Tag "
>" #
(# $
id$ &
)& '
;' (
await 
_repository 
. 
	SaveAsync '
(' (
)( )
;) *
} 	
}   
}!! á
ZC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Tags\TagInsert.cs
	namespace 	
FindYourFlix
 
. 
Business 
.  
Tags  $
{ 
public 

class 
	TagInsert 
{		 
private

 
readonly

 
IRepository

 $
_repository

% 0
;

0 1
public 
	TagInsert 
( 
IRepository $

repository% /
)/ 0
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
< 
string  
>  !
Insert" (
(( )
Model) .
model/ 4
)4 5
{ 	
var 
tag 
= 
new 
Tag 
{ 
Id 
= 
Guid 
. 
NewGuid !
(! "
)" #
.# $
ToString$ ,
(, -
)- .
,. /
MovieId 
= 
model 
.  
MovieId  '
,' (
UserId 
= 
model 
. 
UserId %
,% &
Name 
= 
model 
. 
Name !
,! "
InsertedDate 
= 
DateTime '
.' (
UtcNow( .
} 
; 
await 
_repository 
. 
InsertAsync )
() *
tag* -
)- .
;. /
await 
_repository 
. 
	SaveAsync '
(' (
)( )
;) *
return   
tag   
.   
Id   
;   
}!! 	
public## 
class## 
Model## 
{$$ 	
public%% 
string%% 
MovieId%% !
{%%" #
get%%$ '
;%%' (
set%%) ,
;%%, -
}%%. /
public&& 
string&& 
UserId&&  
{&&! "
get&&# &
;&&& '
set&&( +
;&&+ ,
}&&- .
public'' 
string'' 
Name'' 
{''  
get''! $
;''$ %
set''& )
;'') *
}''+ ,
}(( 	
})) 
}** 
XC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Tags\TagList.cs
	namespace		 	
FindYourFlix		
 
.		 
Business		 
.		  
Tags		  $
{

 
public 

class 
TagList 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
public 
TagList 
( 
IRepository "

repository# -
)- .
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Model& +
>+ ,
>, -
Select. 4
(4 5
)5 6
{ 	
return 
await 
_repository $
.$ %
Query% *
<* +
Tag+ .
>. /
(/ 0
)0 1
. 
Select 
( 
e 
=> 
new  
Model! &
(& '
)' (
{ 
Id 
= 
e 
. 
Id 
, 
Name 
= 
e 
. 
Name !
,! "
UserName 
= 
$" !
{! "
e" #
.# $
User$ (
.( )
	FirstName) 2
}2 3
$str3 4
{4 5
e5 6
.6 7
User7 ;
.; <
LastName< D
}D E
"E F
,F G
Movie 
= 
e 
. 
Movie #
.# $
Name$ (
,( )
InsertedDate  
=! "
DateTime# +
.+ ,
UtcNow, 2
} 
) 
. 
ToListAsync 
( 
)  
;  !
} 	
public!! 
class!! 
Model!! 
{"" 	
public## 
string## 
Id## 
{## 
get## "
;##" #
set##$ '
;##' (
}##) *
public$$ 
string$$ 
Name$$ 
{$$  
get$$! $
;$$$ %
set$$& )
;$$) *
}$$+ ,
public%% 
string%% 
UserName%% "
{%%# $
get%%% (
;%%( )
set%%* -
;%%- .
}%%/ 0
public&& 
string&& 
Movie&& 
{&&  !
get&&" %
;&&% &
set&&' *
;&&* +
}&&, -
public'' 
DateTime'' 
InsertedDate'' (
{'') *
get''+ .
;''. /
set''0 3
;''3 4
}''5 6
}(( 	
})) 
}** ü
\C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserDelete.cs
	namespace		 	
FindYourFlix		
 
.		 
Business		 
.		  
Users		  %
{

 
public 

class 

UserDelete 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
public 

UserDelete 
( 
IRepository %

repository& 0
)0 1
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
Delete  
(  !
string! '
id( *
)* +
{ 	
if 
( 
await 
_repository !
.! "
GetByIdAsync" .
<. /
User/ 3
>3 4
(4 5
id5 7
)7 8
==9 ;
null< @
)@ A
{ 
throw 
new #
ObjectNotFoundException 1
(1 2
$"2 4
$str4 A
{A B
idB D
}D E
$strE U
"U V
)V W
;W X
} 
_repository 
. 
Delete 
< 
User #
># $
($ %
id% '
)' (
;( )
await 
_repository 
. 
	SaveAsync '
(' (
)( )
;) *
} 	
} 
} Î$
\C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserInsert.cs
	namespace 	
FindYourFlix
 
. 
Business 
.  
Users  %
{ 
public		 

class		 

UserInsert		 
{

 
private 
readonly 
IRepository $
_repository% 0
;0 1
public 

UserInsert 
( 
IRepository %

repository& 0
)0 1
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
Insert  
(  !
Model! &
model' ,
), -
{ 	
await 
_repository 
. 
InsertAsync )
() *
new* -
User. 2
{ 
Id 
= 
Guid 
. 
NewGuid !
(! "
)" #
.# $
ToString$ ,
(, -
)- .
,. /
	FirstName 
= 
model !
.! "
	FirstName" +
,+ ,
LastName 
= 
model  
.  !
LastName! )
,) *
UserName 
= 
model  
.  !
UserName! )
,) *
Email 
= 
model 
. 
Email #
,# $
Password 
= 
HashPassword '
(' (
model( -
.- .
Password. 6
)6 7
,7 8
InsertedDate 
= 
DateTime '
.' (
UtcNow( .
} 
) 
; 
await 
_repository 
. 
	SaveAsync '
(' (
)( )
;) *
}   	
private"" 
static"" 
string"" 
HashPassword"" *
(""* +
string""+ 1
password""2 :
)"": ;
{## 	
byte$$ 
[$$ 
]$$ 
salt$$ 
;$$ 
new%% $
RNGCryptoServiceProvider%% (
(%%( )
)%%) *
.%%* +
GetBytes%%+ 3
(%%3 4
salt%%4 8
=%%9 :
new%%; >
byte%%? C
[%%C D
$num%%D F
]%%F G
)%%G H
;%%H I
var&& 
pbkdf2&& 
=&& 
new&& 
Rfc2898DeriveBytes&& /
(&&/ 0
password&&0 8
,&&8 9
salt&&: >
,&&> ?
$num&&@ F
)&&F G
;&&G H
var'' 
hash'' 
='' 
pbkdf2'' 
.'' 
GetBytes'' &
(''& '
$num''' )
)'') *
;''* +
var(( 
	hashBytes(( 
=(( 
new((  
byte((! %
[((% &
$num((& (
]((( )
;(() *
Array)) 
.)) 
Copy)) 
()) 
salt)) 
,)) 
$num)) 
,)) 
	hashBytes))  )
,))) *
$num))+ ,
,)), -
$num)). 0
)))0 1
;))1 2
Array** 
.** 
Copy** 
(** 
hash** 
,** 
$num** 
,** 
	hashBytes**  )
,**) *
$num**+ -
,**- .
$num**/ 1
)**1 2
;**2 3
return++ 
Convert++ 
.++ 
ToBase64String++ )
(++) *
	hashBytes++* 3
)++3 4
;++4 5
},, 	
public.. 
class.. 
Model.. 
{// 	
public00 
string00 
	FirstName00 #
{00$ %
get00& )
;00) *
set00+ .
;00. /
}000 1
public11 
string11 
LastName11 "
{11# $
get11% (
;11( )
set11* -
;11- .
}11/ 0
public22 
string22 
UserName22 "
{22# $
get22% (
;22( )
set22* -
;22- .
}22/ 0
public33 
string33 
Email33 
{33  !
get33" %
;33% &
set33' *
;33* +
}33, -
public44 
string44 
Password44 "
{44# $
get44% (
;44( )
set44* -
;44- .
}44/ 0
}55 	
}77 
}88 è(
`C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserLikeAction.cs
	namespace		 	
FindYourFlix		
 
.		 
Business		 
.		  
Users		  %
{

 
public 

class 
UserLikeAction 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
private 
readonly 
	IUserInfo "
	_userInfo# ,
;, -
public 
UserLikeAction 
( 
IRepository )

repository* 4
,4 5
	IUserInfo6 ?
userInfo@ H
)H I
{ 	
_repository 
= 

repository $
;$ %
	_userInfo 
= 
userInfo  
;  !
} 	
public 
async 
Task 
Insert  
(  !
string! '
movieId( /
)/ 0
{ 	
var 
userId 
= 
await 
	_userInfo (
.( )
	GetUserId) 2
(2 3
)3 4
;4 5
if 
( 
await 
_repository !
.! "
Query" '
<' (
User( ,
>, -
(- .
). /
. 
Where 
( 
e 
=> 
e 
. 
Id  
==! #
userId$ *
)* +
. 
FirstOrDefaultAsync $
($ %
)% &
==' )
null* .
). /
{ 
throw 
new #
ObjectNotFoundException 1
(1 2
$"2 4
$str4 A
{A B
userIdB H
}H I
$strI Y
"Y Z
)Z [
;[ \
} 
if!! 
(!! 
await!! 
_repository!! !
.!!! "
Query!!" '
<!!' (
Movie!!( -
>!!- .
(!!. /
)!!/ 0
."" 
Where"" 
("" 
e"" 
=>"" 
e"" 
."" 
Id""  
==""! #
movieId""$ +
)""+ ,
.## 
FirstOrDefaultAsync## $
(##$ %
)##% &
==##' )
null##* .
)##. /
{$$ 
throw%% 
new%% #
ObjectNotFoundException%% 1
(%%1 2
$"%%2 4
$str%%4 B
{%%B C
movieId%%C J
}%%J K
$str%%K [
"%%[ \
)%%\ ]
;%%] ^
}&& 
if(( 
((( 
await(( 
_repository(( !
.((! "
Query((" '
<((' (

LikedMovie((( 2
>((2 3
(((3 4
)((4 5
.((5 6
AnyAsync((6 >
(((> ?
e((? @
=>((A C
e((D E
.((E F
MovieId((F M
==((N P
movieId((Q X
&&((Y [
e((\ ]
.((] ^
UserId((^ d
==((e g
userId((h n
)((n o
)((o p
{)) 
var** 

likedMovie** 
=**  
await**! &
_repository**' 2
.**2 3
Query**3 8
<**8 9

LikedMovie**9 C
>**C D
(**D E
)**E F
.++ 
Where++ 
(++ 
e++ 
=>++ 
e++  !
.++! "
MovieId++" )
==++* ,
movieId++- 4
&&++5 7
e++8 9
.++9 :
UserId++: @
==++A C
userId++D J
)++J K
.,, 
FirstOrDefaultAsync,, (
(,,( )
),,) *
;,,* +
_repository.. 
... 
Delete.. "
<.." #

LikedMovie..# -
>..- .
(... /

likedMovie../ 9
...9 :
Id..: <
)..< =
;..= >
}// 
else00 
{11 
await22 
_repository22 !
.22! "
InsertAsync22" -
(22- .
new22. 1

LikedMovie222 <
{33 
Id44 
=44 
Guid44 
.44 
NewGuid44 %
(44% &
)44& '
.44' (
ToString44( 0
(440 1
)441 2
,442 3
UserId55 
=55 
userId55 #
,55# $
MovieId66 
=66 
movieId66 %
}77 
)77 
;77 
}88 
await:: 
_repository:: 
.:: 
	SaveAsync:: '
(::' (
)::( )
;::) *
};; 	
public== 
class== 
Model== 
{>> 	
public?? 
string?? 
UserId??  
{??! "
get??# &
;??& '
set??( +
;??+ ,
}??- .
public@@ 
string@@ 
MovieId@@ !
{@@" #
get@@$ '
;@@' (
set@@) ,
;@@, -
}@@. /
}AA 	
}BB 
}CC ö
ZC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserList.cs
	namespace 	
FindYourFlix
 
. 
Business 
.  
Users  %
{		 
public

 

class

 
UserList

 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
public 
UserList 
( 
IRepository #

repository$ .
). /
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Model& +
>+ ,
>, -
Select. 4
(4 5
)5 6
{ 	
return 
await 
_repository $
.$ %
Query% *
<* +
User+ /
>/ 0
(0 1
)1 2
. 
Select 
( 
e 
=> 
new  
Model! &
{ 
Id 
= 
e 
. 
Id 
, 
	FirstName 
= 
e  !
.! "
	FirstName" +
,+ ,
LastName 
= 
e  
.  !
LastName! )
,) *
UserName 
= 
e  
.  !
UserName! )
,) *
Email 
= 
e 
. 
Email #
} 
) 
. 
ToListAsync 
( 
) 
; 
} 	
public!! 
class!! 
Model!! 
{"" 	
public## 
string## 
Id## 
{## 
get## "
;##" #
set##$ '
;##' (
}##) *
public$$ 
string$$ 
	FirstName$$ #
{$$$ %
get$$& )
;$$) *
set$$+ .
;$$. /
}$$0 1
public%% 
string%% 
LastName%% "
{%%# $
get%%% (
;%%( )
set%%* -
;%%- .
}%%/ 0
public&& 
string&& 
UserName&& "
{&&# $
get&&% (
;&&( )
set&&* -
;&&- .
}&&/ 0
public'' 
string'' 
Email'' 
{''  !
get''" %
;''% &
set''' *
;''* +
}'', -
}(( 	
})) 
}** 
\C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserSelect.cs
	namespace 	
FindYourFlix
 
. 
Business 
.  
Users  %
{		 
public

 

class

 

UserSelect

 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
private 
readonly 
	IUserInfo "
	_userInfo# ,
;, -
public 

UserSelect 
( 
IRepository %

repository& 0
,0 1
	IUserInfo2 ;
userInfo< D
)D E
{ 	
_repository 
= 

repository $
;$ %
	_userInfo 
= 
userInfo  
;  !
} 	
public 
async 
Task 
< 
Model 
>  
Select! '
(' (
)( )
{ 	
var 
id 
= 
await 
	_userInfo $
.$ %
	GetUserId% .
(. /
)/ 0
;0 1
var 
user 
= 
await 
_repository (
.( )
Query) .
<. /
User/ 3
>3 4
(4 5
)5 6
. 
Where 
( 
e 
=> 
e 
. 
Id  
==! #
id$ &
)& '
. 
Select 
( 
e 
=> 
new  
Model! &
{ 
Id 
= 
e 
. 
Id 
, 
	FirstName 
= 
e  !
.! "
	FirstName" +
,+ ,
LastName 
= 
e  
.  !
LastName! )
,) *
UserName 
= 
e  
.  !
UserName! )
,) *
Email   
=   
e   
.   
Email   #
,  # $
LikedMovies!! 
=!!  !
e!!" #
.!!# $
LikedMovies!!$ /
.!!/ 0
Select!!0 6
(!!6 7
m!!7 8
=>!!9 ;
m!!< =
.!!= >
Movie!!> C
.!!C D
Name!!D H
)!!H I
.!!I J
ToList!!J P
(!!P Q
)!!Q R
}"" 
)"" 
.## 
FirstOrDefaultAsync## $
(##$ %
)##% &
;##& '
return$$ 
user$$ 
;$$ 
}%% 	
public'' 
class'' 
Model'' 
{(( 	
public)) 
string)) 
Id)) 
{)) 
get)) "
;))" #
set))$ '
;))' (
}))) *
public** 
string** 
	FirstName** #
{**$ %
get**& )
;**) *
set**+ .
;**. /
}**0 1
public++ 
string++ 
LastName++ "
{++# $
get++% (
;++( )
set++* -
;++- .
}++/ 0
public,, 
string,, 
UserName,, "
{,,# $
get,,% (
;,,( )
set,,* -
;,,- .
},,/ 0
public-- 
string-- 
Email-- 
{--  !
get--" %
;--% &
set--' *
;--* +
}--, -
public.. 
List.. 
<.. 
string.. 
>.. 
LikedMovies..  +
{.., -
get... 1
;..1 2
set..3 6
;..6 7
}..8 9
}// 	
}11 
}22 Ö
\C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserUpdate.cs
	namespace

 	
FindYourFlix


 
.

 
Business

 
.

  
Users

  %
{ 
public 

class 

UserUpdate 
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
private 
readonly 
	IUserInfo "
	_userInfo# ,
;, -
public 

UserUpdate 
( 
IRepository %

repository& 0
,0 1
	IUserInfo2 ;
userInfo< D
)D E
{ 	
_repository 
= 

repository $
;$ %
	_userInfo 
= 
userInfo  
;  !
} 	
public 
async 
Task 
Update  
(  !
Model! &
model' ,
), -
{ 	
var 
id 
= 
await 
	_userInfo $
.$ %
	GetUserId% .
(. /
)/ 0
;0 1
if 
( 
await 
_repository !
.! "
GetByIdAsync" .
<. /
User/ 3
>3 4
(4 5
id5 7
)7 8
==9 ;
null< @
)@ A
{ 
throw 
new #
ObjectNotFoundException 1
(1 2
$"2 4
$str4 A
{A B
idB D
}D E
$strE U
"U V
)V W
;W X
} 
var   
user   
=   
await   
_repository   (
.  ( )
GetByIdAsync  ) 5
<  5 6
User  6 :
>  : ;
(  ; <
id  < >
)  > ?
;  ? @
user"" 
."" 
	FirstName"" 
="" 
model"" "
.""" #
	FirstName""# ,
;"", -
user## 
.## 
LastName## 
=## 
model## !
.##! "
LastName##" *
;##* +
user$$ 
.$$ 
UserName$$ 
=$$ 
model$$ !
.$$! "
UserName$$" *
;$$* +
user%% 
.%% 
Email%% 
=%% 
model%% 
.%% 
Email%% $
;%%$ %
_repository'' 
.'' 
Update'' 
('' 
user'' #
)''# $
;''$ %
await(( 
_repository(( 
.(( 
	SaveAsync(( '
(((' (
)((( )
;(() *
})) 	
public++ 
class++ 
Model++ 
{,, 	
public-- 
string-- 
	FirstName-- #
{--$ %
get--& )
;--) *
set--+ .
;--. /
}--0 1
public.. 
string.. 
LastName.. "
{..# $
get..% (
;..( )
set..* -
;..- .
}../ 0
public// 
string// 
UserName// "
{//# $
get//% (
;//( )
set//* -
;//- .
}/// 0
public00 
string00 
Email00 
{00  !
get00" %
;00% &
set00' *
;00* +
}00, -
}11 	
}22 
}33 Ö3
dC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Business\Users\UserUpdatePassword.cs
	namespace		 	
FindYourFlix		
 
.		 
Business		 
.		  
Users		  %
{

 
public 

class 
UserUpdatePassword #
{ 
private 
readonly 
IRepository $
_repository% 0
;0 1
private 
readonly 
	IUserInfo "
	_userInfo# ,
;, -
public 
UserUpdatePassword !
(! "
IRepository" -

repository. 8
,8 9
	IUserInfo: C
userInfoD L
)L M
{ 	
_repository 
= 

repository $
;$ %
	_userInfo 
= 
userInfo  
;  !
} 	
public 
async 
Task 
< 
bool 
> 
UpdatePassword  .
(. /
Model/ 4
model5 :
): ;
{ 	
var 
id 
= 
await 
	_userInfo $
.$ %
	GetUserId% .
(. /
)/ 0
;0 1
var 
user 
= 
await 
_repository (
.( )
Query) .
<. /
User/ 3
>3 4
(4 5
)5 6
.6 7
Where7 <
(< =
e= >
=>? A
eB C
.C D
IdD F
==G I
idJ L
)L M
.M N
FirstOrDefaultAsyncN a
(a b
)b c
;c d
if 
( 
CheckOldPassword  
(  !
model! &
.& '
OldPassword' 2
,2 3
user4 8
.8 9
Password9 A
)A B
)B C
{ 
user 
. 
Password 
= 
HashPassword  ,
(, -
model- 2
.2 3
NewPassword3 >
)> ?
;? @
_repository 
. 
Update "
(" #
user# '
)' (
;( )
await 
_repository !
.! "
	SaveAsync" +
(+ ,
), -
;- .
return 
true 
; 
}   
return"" 
false"" 
;"" 
}## 	
private%% 
static%% 
bool%% 
CheckOldPassword%% ,
(%%, -
string%%- 3
insertedPassword%%4 D
,%%D E
string%%F L
password%%M U
)%%U V
{&& 	
var'' 
	hashBytes'' 
='' 
Convert'' #
.''# $
FromBase64String''$ 4
(''4 5
password''5 =
)''= >
;''> ?
var(( 
salt(( 
=(( 
new(( 
byte(( 
[((  
$num((  "
]((" #
;((# $
Array)) 
.)) 
Copy)) 
()) 
	hashBytes))  
,))  !
$num))" #
,))# $
salt))% )
,))) *
$num))+ ,
,)), -
$num)). 0
)))0 1
;))1 2
var** 
pbkdf2** 
=** 
new** 
Rfc2898DeriveBytes** /
(**/ 0
insertedPassword**0 @
,**@ A
salt**B F
,**F G
$num**H N
)**N O
;**O P
var++ 
hash++ 
=++ 
pbkdf2++ 
.++ 
GetBytes++ &
(++& '
$num++' )
)++) *
;++* +
for,, 
(,, 
var,, 
i,, 
=,, 
$num,, 
;,, 
i,, 
<,, 
$num,,  "
;,," #
i,,$ %
++,,% '
),,' (
if-- 
(-- 
	hashBytes-- 
[-- 
i-- 
+--  !
$num--" $
]--$ %
!=--& (
hash--) -
[--- .
i--. /
]--/ 0
)--0 1
return.. 
false..  
;..  !
return// 
true// 
;// 
}00 	
private22 
static22 
string22 
HashPassword22 *
(22* +
string22+ 1
password222 :
)22: ;
{33 	
byte44 
[44 
]44 
salt44 
;44 
new55 $
RNGCryptoServiceProvider55 (
(55( )
)55) *
.55* +
GetBytes55+ 3
(553 4
salt554 8
=559 :
new55; >
byte55? C
[55C D
$num55D F
]55F G
)55G H
;55H I
var66 
pbkdf266 
=66 
new66 
Rfc2898DeriveBytes66 /
(66/ 0
password660 8
,668 9
salt66: >
,66> ?
$num66@ F
)66F G
;66G H
var77 
hash77 
=77 
pbkdf277 
.77 
GetBytes77 &
(77& '
$num77' )
)77) *
;77* +
var88 
	hashBytes88 
=88 
new88  
byte88! %
[88% &
$num88& (
]88( )
;88) *
Array99 
.99 
Copy99 
(99 
salt99 
,99 
$num99 
,99 
	hashBytes99  )
,99) *
$num99+ ,
,99, -
$num99. 0
)990 1
;991 2
Array:: 
.:: 
Copy:: 
(:: 
hash:: 
,:: 
$num:: 
,:: 
	hashBytes::  )
,::) *
$num::+ -
,::- .
$num::/ 1
)::1 2
;::2 3
return;; 
Convert;; 
.;; 
ToBase64String;; )
(;;) *
	hashBytes;;* 3
);;3 4
;;;4 5
}<< 	
public>> 
class>> 
Model>> 
{?? 	
public@@ 
string@@ 
OldPassword@@ %
{@@& '
get@@( +
;@@+ ,
set@@- 0
;@@0 1
}@@2 3
publicAA 
stringAA 
NewPasswordAA %
{AA& '
getAA( +
;AA+ ,
setAA- 0
;AA0 1
}AA2 3
}BB 	
}CC 
}DD  
VC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Entities\Genre.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 
Entities $
{ 
public 

class 
Genre 
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
MovieId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
Movie 
Movie 
{ 
get  
;  !
set" %
;% &
}' (
}		 
}

 Â
[C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Entities\LikedMovie.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 
Entities $
{ 
public 

class 

LikedMovie 
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
string		 
MovieId		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public

 
User

 
User

 
{

 
get

 
;

 
set

  #
;

# $
}

% &
public 
Movie 
Movie 
{ 
get  
;  !
set" %
;% &
}' (
} 
} Î	
VC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Entities\Movie.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 
Entities $
{ 
public 

class 
Movie 
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public		 
List		 
<		 
Genre		 
>		 
Genres		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public

 
List

 
<

 

LikedMovie

 
>

 
LikedMovies

  +
{

, -
get

. 1
;

1 2
set

3 6
;

6 7
}

8 9
public 
List 
< 
Tag 
> 
Tags 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} î

TC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Entities\Tag.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 
Entities $
{ 
public 

class 
Tag 
{ 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
string		 
MovieId		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public

 
string

 
Name

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
DateTime 
InsertedDate $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
User 
User 
{ 
get 
; 
set  #
;# $
}% &
public 
Movie 
Movie 
{ 
get  
;  !
set" %
;% &
}' (
} 
} 
UC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Entities\User.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 
Entities $
{ 
public		 

class		 
User		 
{

 
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
InsertedDate $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
List 
< 

LikedMovie 
> 
LikedMovies  +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
List 
< 
Tag 
> 
Tags 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} 
^C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Interfaces\IRepository.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 

Interfaces &
{ 
public 

	interface 
IRepository  
:! "
IDisposable# .
{ 

IQueryable		 
<		 
TEntity		 
>		 
Query		 !
<		! "
TEntity		" )
>		) *
(		* +
)		+ ,
where		- 2
TEntity		3 :
:		; <
class		= B
;		B C
void

 
Insert

 
<

 
TEntity

 
>

 
(

 
TEntity

 $
entity

% +
)

+ ,
where

- 2
TEntity

3 :
:

; <
class

= B
;

B C
Task 
InsertAsync 
< 
TEntity  
>  !
(! "
TEntity" )
entity* 0
)0 1
where2 7
TEntity8 ?
:@ A
classB G
;G H
void 
Delete 
< 
TEntity 
> 
( 
object #
id$ &
)& '
where( -
TEntity. 5
:6 7
class8 =
;= >
void 
Update 
< 
TEntity 
> 
( 
TEntity $
entity% +
)+ ,
where- 2
TEntity3 :
:; <
class= B
;B C
Task 
< 
TEntity 
> 
GetByIdAsync "
<" #
TEntity# *
>* +
(, -
string- 3
id4 6
)6 7
where8 =
TEntity> E
:F G
classH M
;M N
Task 
< 
int 
> 
	SaveAsync 
( 
) 
; 
} 
} ë
\C:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Interfaces\IUserInfo.cs
	namespace 	
FindYourFlix
 
. 
Data 
. 

Interfaces &
{ 
public 

	interface 
	IUserInfo 
{ 
public 
Task 
< 
string 
> 
	GetUserId %
(% &
)& '
;' (
} 
}		 ë1
RC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\Repository.cs
	namespace 	
FindYourFlix
 
. 
Data 
{ 
public		 

class		 

Repository		 
:		 
IRepository		 )
{

 
private 
readonly 
ApplicationContext +
_context, 4
;4 5
public 

Repository 
( 
ApplicationContext ,
context- 4
)4 5
{ 	
_context 
= 
context 
; 
} 	
public 
void 
Dispose 
( 
) 
{ 	
GC 
. 
SuppressFinalize 
(  
this  $
)$ %
;% &
} 	
public 
virtual 

IQueryable !
<! "
TEntity" )
>) *
Query+ 0
<0 1
TEntity1 8
>8 9
(9 :
): ;
where< A
TEntityB I
:J K
classL Q
{ 	
return 
_context 
. 
Set 
<  
TEntity  '
>' (
(( )
)) *
;* +
} 	
public 
virtual 
void 
Insert "
<" #
TEntity# *
>* +
(+ ,
TEntity, 3
entity4 :
): ;
where< A
TEntityB I
:J K
classL Q
{ 	
_context 
. 
Set 
< 
TEntity  
>  !
(! "
)" #
.# $
Add$ '
(' (
entity( .
). /
;/ 0
}   	
public"" 
virtual"" 
async"" 
Task"" !
InsertAsync""" -
<""- .
TEntity"". 5
>""5 6
(""6 7
TEntity""7 >
entity""? E
)""E F
where""G L
TEntity""M T
:""U V
class""W \
{## 	
await$$ 
_context$$ 
.$$ 
Set$$ 
<$$ 
TEntity$$ &
>$$& '
($$' (
)$$( )
.$$) *
AddAsync$$* 2
($$2 3
entity$$3 9
)$$9 :
;$$: ;
}%% 	
public'' 
virtual'' 
void'' 
Delete'' "
<''" #
TEntity''# *
>''* +
(''+ ,
object'', 2
id''3 5
)''5 6
where''7 <
TEntity''= D
:''E F
class''G L
{(( 	
var)) 
entityToDelete)) 
=))  
_context))! )
.))) *
Set))* -
<))- .
TEntity)). 5
>))5 6
())6 7
)))7 8
.))8 9
Find))9 =
())= >
id))> @
)))@ A
;))A B
Delete** 
(** 
entityToDelete** !
)**! "
;**" #
}++ 	
	protected-- 
virtual-- 
void-- 
Delete-- %
<--% &
TEntity--& -
>--- .
(--. /
TEntity--/ 6
entity--7 =
)--= >
where--? D
TEntity--E L
:--M N
class--O T
{.. 	
if// 
(// 
_context// 
.// 
Entry// 
(// 
entity// %
)//% &
.//& '
State//' ,
==//- /
EntityState//0 ;
.//; <
Detached//< D
)//D E
{00 
_context11 
.11 
Set11 
<11 
TEntity11 $
>11$ %
(11% &
)11& '
.11' (
Attach11( .
(11. /
entity11/ 5
)115 6
;116 7
}22 
_context44 
.44 
Set44 
<44 
TEntity44  
>44  !
(44! "
)44" #
.44# $
Remove44$ *
(44* +
entity44+ 1
)441 2
;442 3
}55 	
public77 
virtual77 
void77 
Update77 "
<77" #
TEntity77# *
>77* +
(77+ ,
TEntity77, 3
entity774 :
)77: ;
where77< A
TEntity77B I
:77J K
class77L Q
{88 	
_context99 
.99 
Set99 
<99 
TEntity99  
>99  !
(99! "
)99" #
.99# $
Attach99$ *
(99* +
entity99+ 1
)991 2
;992 3
_context:: 
.:: 
Entry:: 
(:: 
entity:: !
)::! "
.::" #
State::# (
=::) *
EntityState::+ 6
.::6 7
Modified::7 ?
;::? @
};; 	
public== 
async== 
Task== 
<== 
int== 
>== 
	SaveAsync== (
(==( )
)==) *
{>> 	
return?? 
await?? 
_context?? !
.??! "
SaveChangesAsync??" 2
(??2 3
)??3 4
;??4 5
}@@ 	
publicBB 
asyncBB 
TaskBB 
<BB 
TEntityBB !
>BB! "
GetByIdAsyncBB# /
<BB/ 0
TEntityBB0 7
>BB7 8
(BB8 9
stringBB9 ?
idBB@ B
)BBB C
whereBBD I
TEntityBBJ Q
:BBR S
classBBT Y
{CC 	
ifDD 
(DD 
idDD 
==DD 
StringDD 
.DD 
EmptyDD "
)DD" #
{EE 
throwFF 
newFF 
ArgumentExceptionFF +
(FF+ ,
$"FF, .
{FF. /
nameofFF/ 5
(FF5 6
GetByIdAsyncFF6 B
)FFB C
}FFC D
$strFFD Y
"FFY Z
)FFZ [
;FF[ \
}GG 
returnII 
awaitII 
_contextII !
.II! "
	FindAsyncII" +
<II+ ,
TEntityII, 3
>II3 4
(II4 5
idII5 7
)II7 8
;II8 9
}JJ 	
}KK 
}LL ¦
PC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Data\UserInfo.cs
	namespace 	
FindYourFlix
 
. 
Data 
{		 
public

 

class

 
UserInfo

 
:

 
	IUserInfo

 $
{ 
private 
readonly  
IHttpContextAccessor - 
_httpContextAccessor. B
;B C
public 
UserInfo 
(  
IHttpContextAccessor ,
httpContextAccessor- @
)@ A
{ 	 
_httpContextAccessor  
=! "
httpContextAccessor# 6
;6 7
} 	
public 
async 
Task 
< 
string  
>  !
	GetUserId" +
(+ ,
), -
{ 	
if 
(  
_httpContextAccessor $
.$ %
HttpContext% 0
==1 3
null4 8
)8 9
return 
null 
; 
var 
token 
= 
await  
_httpContextAccessor 2
.2 3
HttpContext3 >
.> ?
GetTokenAsync? L
(L M
$strM U
,U V
$strW e
)e f
;f g
var 
jwtSecurityToken  
=! "
new# &#
JwtSecurityTokenHandler' >
(> ?
)? @
.@ A
ReadJwtTokenA M
(M N
tokenN S
)S T
;T U
return 
jwtSecurityToken #
.# $
Claims$ *
.* +
First+ 0
(0 1
claim1 6
=>7 9
claim: ?
.? @
Type@ D
==E G
$strH M
)M N
.N O
ValueO T
;T U
} 	
} 
} Î
eC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Exceptions\ObjectNotFoundException.cs
	namespace 	
FindYourFlix
 
. 

Exceptions !
{ 
public 

class #
ObjectNotFoundException (
:) *
	Exception+ 4
{ 
public #
ObjectNotFoundException &
(& '
)' (
{ 	
}		 	
public #
ObjectNotFoundException &
(& '
string' -
message. 5
)5 6
: 
base 
( 
message 
) 
{ 	
} 	
} 
} Ð
mC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Migrations\20211111170123_InitialMigration.cs
	namespace 	
FindYourFlix
 
. 

Migrations !
{ 
public 

partial 
class 
InitialMigration )
:* +
	Migration, 5
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 B
,B C
	maxLengthD M
:M N
$numO Q
,Q R
nullableS [
:[ \
false] b
)b c
,c d
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
	maxLengthG P
:P Q
$numR U
,U V
nullableW _
:_ `
truea e
)e f
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
Id9 ;
); <
;< =
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 B
,B C
	maxLengthD M
:M N
$numO Q
,Q R
nullableS [
:[ \
false] b
)b c
,c d
	FirstName 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; I
,I J
	maxLengthK T
:T U
$numV X
,X Y
nullableZ b
:b c
trued h
)h i
,i j
LastName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: H
,H I
	maxLengthJ S
:S T
$numU W
,W X
nullableY a
:a b
truec g
)g h
,h i
UserName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: H
,H I
	maxLengthJ S
:S T
$numU W
,W X
nullableY a
:a b
truec g
)g h
,h i
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
	maxLengthH Q
:Q R
$numS V
,V W
nullableX `
:` a
trueb f
)f g
,g h
InsertedDate  
=! "
table# (
.( )
Column) /
</ 0
DateTime0 8
>8 9
(9 :
type: >
:> ?
$str@ K
,K L
nullableM U
:U V
falseW \
,\ ]
defaultValueSql^ m
:m n
$stro }
)} ~
}   
,   
constraints!! 
:!! 
table!! "
=>!!# %
{"" 
table## 
.## 

PrimaryKey## $
(##$ %
$str##% /
,##/ 0
x##1 2
=>##3 5
x##6 7
.##7 8
Id##8 :
)##: ;
;##; <
}$$ 
)$$ 
;$$ 
migrationBuilder&& 
.&& 
CreateTable&& (
(&&( )
name'' 
:'' 
$str'' 
,'' 
columns(( 
:(( 
table(( 
=>(( !
new((" %
{)) 
Id** 
=** 
table** 
.** 
Column** %
<**% &
string**& ,
>**, -
(**- .
type**. 2
:**2 3
$str**4 B
,**B C
	maxLength**D M
:**M N
$num**O Q
,**Q R
nullable**S [
:**[ \
false**] b
)**b c
,**c d
MovieId++ 
=++ 
table++ #
.++# $
Column++$ *
<++* +
string+++ 1
>++1 2
(++2 3
type++3 7
:++7 8
$str++9 G
,++G H
nullable++I Q
:++Q R
true++S W
)++W X
,++X Y
Name,, 
=,, 
table,,  
.,,  !
Column,,! '
<,,' (
string,,( .
>,,. /
(,,/ 0
type,,0 4
:,,4 5
$str,,6 D
,,,D E
	maxLength,,F O
:,,O P
$num,,Q S
,,,S T
nullable,,U ]
:,,] ^
true,,_ c
),,c d
}-- 
,-- 
constraints.. 
:.. 
table.. "
=>..# %
{// 
table00 
.00 

PrimaryKey00 $
(00$ %
$str00% 0
,000 1
x002 3
=>004 6
x007 8
.008 9
Id009 ;
)00; <
;00< =
table11 
.11 

ForeignKey11 $
(11$ %
name22 
:22 
$str22 8
,228 9
column33 
:33 
x33  !
=>33" $
x33% &
.33& '
MovieId33' .
,33. /
principalTable44 &
:44& '
$str44( 0
,440 1
principalColumn55 '
:55' (
$str55) -
,55- .
onDelete66  
:66  !
ReferentialAction66" 3
.663 4
Restrict664 <
)66< =
;66= >
}77 
)77 
;77 
migrationBuilder99 
.99 
CreateTable99 (
(99( )
name:: 
::: 
$str:: #
,::# $
columns;; 
:;; 
table;; 
=>;; !
new;;" %
{<< 
Id== 
=== 
table== 
.== 
Column== %
<==% &
string==& ,
>==, -
(==- .
type==. 2
:==2 3
$str==4 B
,==B C
	maxLength==D M
:==M N
$num==O Q
,==Q R
nullable==S [
:==[ \
false==] b
)==b c
,==c d
UserId>> 
=>> 
table>> "
.>>" #
Column>># )
<>>) *
string>>* 0
>>>0 1
(>>1 2
type>>2 6
:>>6 7
$str>>8 F
,>>F G
nullable>>H P
:>>P Q
true>>R V
)>>V W
,>>W X
MovieId?? 
=?? 
table?? #
.??# $
Column??$ *
<??* +
string??+ 1
>??1 2
(??2 3
type??3 7
:??7 8
$str??9 G
,??G H
nullable??I Q
:??Q R
true??S W
)??W X
}@@ 
,@@ 
constraintsAA 
:AA 
tableAA "
=>AA# %
{BB 
tableCC 
.CC 

PrimaryKeyCC $
(CC$ %
$strCC% 5
,CC5 6
xCC7 8
=>CC9 ;
xCC< =
.CC= >
IdCC> @
)CC@ A
;CCA B
tableDD 
.DD 

ForeignKeyDD $
(DD$ %
nameEE 
:EE 
$strEE =
,EE= >
columnFF 
:FF 
xFF  !
=>FF" $
xFF% &
.FF& '
MovieIdFF' .
,FF. /
principalTableGG &
:GG& '
$strGG( 0
,GG0 1
principalColumnHH '
:HH' (
$strHH) -
,HH- .
onDeleteII  
:II  !
ReferentialActionII" 3
.II3 4
RestrictII4 <
)II< =
;II= >
tableJJ 
.JJ 

ForeignKeyJJ $
(JJ$ %
nameKK 
:KK 
$strKK ;
,KK; <
columnLL 
:LL 
xLL  !
=>LL" $
xLL% &
.LL& '
UserIdLL' -
,LL- .
principalTableMM &
:MM& '
$strMM( /
,MM/ 0
principalColumnNN '
:NN' (
$strNN) -
,NN- .
onDeleteOO  
:OO  !
ReferentialActionOO" 3
.OO3 4
RestrictOO4 <
)OO< =
;OO= >
}PP 
)PP 
;PP 
migrationBuilderRR 
.RR 
CreateTableRR (
(RR( )
nameSS 
:SS 
$strSS 
,SS 
columnsTT 
:TT 
tableTT 
=>TT !
newTT" %
{UU 
IdVV 
=VV 
tableVV 
.VV 
ColumnVV %
<VV% &
stringVV& ,
>VV, -
(VV- .
typeVV. 2
:VV2 3
$strVV4 B
,VVB C
	maxLengthVVD M
:VVM N
$numVVO Q
,VVQ R
nullableVVS [
:VV[ \
falseVV] b
)VVb c
,VVc d
UserIdWW 
=WW 
tableWW "
.WW" #
ColumnWW# )
<WW) *
stringWW* 0
>WW0 1
(WW1 2
typeWW2 6
:WW6 7
$strWW8 F
,WWF G
nullableWWH P
:WWP Q
trueWWR V
)WWV W
,WWW X
MovieIdXX 
=XX 
tableXX #
.XX# $
ColumnXX$ *
<XX* +
stringXX+ 1
>XX1 2
(XX2 3
typeXX3 7
:XX7 8
$strXX9 G
,XXG H
nullableXXI Q
:XXQ R
trueXXS W
)XXW X
,XXX Y
NameYY 
=YY 
tableYY  
.YY  !
ColumnYY! '
<YY' (
stringYY( .
>YY. /
(YY/ 0
typeYY0 4
:YY4 5
$strYY6 E
,YYE F
	maxLengthYYG P
:YYP Q
$numYYR U
,YYU V
nullableYYW _
:YY_ `
trueYYa e
)YYe f
,YYf g
InsertedDateZZ  
=ZZ! "
tableZZ# (
.ZZ( )
ColumnZZ) /
<ZZ/ 0
DateTimeZZ0 8
>ZZ8 9
(ZZ9 :
typeZZ: >
:ZZ> ?
$strZZ@ K
,ZZK L
nullableZZM U
:ZZU V
falseZZW \
,ZZ\ ]
defaultValueSqlZZ^ m
:ZZm n
$strZZo }
)ZZ} ~
}[[ 
,[[ 
constraints\\ 
:\\ 
table\\ "
=>\\# %
{]] 
table^^ 
.^^ 

PrimaryKey^^ $
(^^$ %
$str^^% .
,^^. /
x^^0 1
=>^^2 4
x^^5 6
.^^6 7
Id^^7 9
)^^9 :
;^^: ;
table__ 
.__ 

ForeignKey__ $
(__$ %
name`` 
:`` 
$str`` 6
,``6 7
columnaa 
:aa 
xaa  !
=>aa" $
xaa% &
.aa& '
MovieIdaa' .
,aa. /
principalTablebb &
:bb& '
$strbb( 0
,bb0 1
principalColumncc '
:cc' (
$strcc) -
,cc- .
onDeletedd  
:dd  !
ReferentialActiondd" 3
.dd3 4
Restrictdd4 <
)dd< =
;dd= >
tableee 
.ee 

ForeignKeyee $
(ee$ %
nameff 
:ff 
$strff 4
,ff4 5
columngg 
:gg 
xgg  !
=>gg" $
xgg% &
.gg& '
UserIdgg' -
,gg- .
principalTablehh &
:hh& '
$strhh( /
,hh/ 0
principalColumnii '
:ii' (
$strii) -
,ii- .
onDeletejj  
:jj  !
ReferentialActionjj" 3
.jj3 4
Restrictjj4 <
)jj< =
;jj= >
}kk 
)kk 
;kk 
migrationBuildermm 
.mm 
CreateIndexmm (
(mm( )
namenn 
:nn 
$strnn $
,nn$ %
tableoo 
:oo 
$stroo 
,oo  
columnpp 
:pp 
$strpp 
)pp 
;pp 
migrationBuilderrr 
.rr 
CreateIndexrr (
(rr( )
namess 
:ss 
$strss )
,ss) *
tablett 
:tt 
$strtt 
,tt  
columnuu 
:uu 
$struu !
)uu! "
;uu" #
migrationBuilderww 
.ww 
CreateIndexww (
(ww( )
namexx 
:xx 
$strxx )
,xx) *
tableyy 
:yy 
$stryy $
,yy$ %
columnzz 
:zz 
$strzz 
)zz 
;zz 
migrationBuilder|| 
.|| 
CreateIndex|| (
(||( )
name}} 
:}} 
$str}} .
,}}. /
table~~ 
:~~ 
$str~~ $
,~~$ %
column 
: 
$str !
)! "
;" #
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
 
:
 
$str
 -
,
- .
table
 
:
 
$str
 $
,
$ %
column
 
:
 
$str
  
)
  !
;
! "
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
 
:
 
$str
 $
,
$ %
table
 
:
 
$str
 
,
  
column
 
:
 
$str
 
)
 
;
 
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
 
:
 
$str
 "
,
" #
table
 
:
 
$str
 
,
 
column
 
:
 
$str
 
)
 
;
 
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
 
:
 
$str
 '
,
' (
table
 
:
 
$str
 
,
 
column
 
:
 
$str
 !
)
! "
;
" #
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
 
:
 
$str
 &
,
& '
table
 
:
 
$str
 
,
 
column
 
:
 
$str
  
)
  !
;
! "
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
 
:
 
$str
 #
,
# $
table
 
:
 
$str
 
,
 
column
 
:
 
$str
 
)
 
;
 
}
 	
	protected
   
override
   
void
   
Down
    $
(
  $ %
MigrationBuilder
  % 5
migrationBuilder
  6 F
)
  F G
{
¡¡ 	
migrationBuilder
¢¢ 
.
¢¢ 
	DropTable
¢¢ &
(
¢¢& '
name
££ 
:
££ 
$str
££ 
)
££ 
;
££  
migrationBuilder
¥¥ 
.
¥¥ 
	DropTable
¥¥ &
(
¥¥& '
name
¦¦ 
:
¦¦ 
$str
¦¦ #
)
¦¦# $
;
¦¦$ %
migrationBuilder
¨¨ 
.
¨¨ 
	DropTable
¨¨ &
(
¨¨& '
name
©© 
:
©© 
$str
©© 
)
©© 
;
©© 
migrationBuilder
«« 
.
«« 
	DropTable
«« &
(
««& '
name
¬¬ 
:
¬¬ 
$str
¬¬ 
)
¬¬ 
;
¬¬  
migrationBuilder
®® 
.
®® 
	DropTable
®® &
(
®®& '
name
¯¯ 
:
¯¯ 
$str
¯¯ 
)
¯¯ 
;
¯¯ 
}
°° 	
}
±± 
}²² 
pC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Migrations\20211209130309_AddedPasswordColumn.cs
	namespace 	
FindYourFlix
 
. 

Migrations !
{ 
public 

partial 
class 
AddedPasswordColumn ,
:- .
	Migration/ 8
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

  
,

  !
table 
: 
$str 
, 
type 
: 
$str %
,% &
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str  
,  !
table 
: 
$str 
) 
;  
} 	
} 
} ¸

JC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Program.cs
	namespace 	
FindYourFlix
 
{ 
public 

static 
class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{8 9

webBuilder: D
.D E

UseStartupE O
<O P
StartupP W
>W X
(X Y
)Y Z
;Z [
}\ ]
)] ^
;^ _
} 
} ×E
JC:\Users\RaresGeorge\Documents\GitHub\FindYourFlix\FindYourFlix\Startup.cs
	namespace 	
FindYourFlix
 
. 
Web 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
}   	
public"" 
IConfiguration"" 
Configuration"" +
{"", -
get"". 1
;""1 2
}""3 4
public$$ 
void$$ 
ConfigureServices$$ %
($$% &
IServiceCollection$$& 8
services$$9 A
)$$A B
{%% 	
services&& 
.&& 
AddTransient&& !
<&&! "

UserInsert&&" ,
>&&, -
(&&- .
)&&. /
;&&/ 0
services'' 
.'' 
AddTransient'' !
<''! "
UserList''" *
>''* +
(''+ ,
)'', -
;''- .
services(( 
.(( 
AddTransient(( !
<((! "

UserDelete((" ,
>((, -
(((- .
)((. /
;((/ 0
services)) 
.)) 
AddTransient)) !
<))! "
UserLikeAction))" 0
>))0 1
())1 2
)))2 3
;))3 4
services** 
.** 
AddTransient** !
<**! "

UserSelect**" ,
>**, -
(**- .
)**. /
;**/ 0
services++ 
.++ 
AddTransient++ !
<++! "

UserUpdate++" ,
>++, -
(++- .
)++. /
;++/ 0
services,, 
.,, 
AddTransient,, !
<,,! "
UserUpdatePassword,," 4
>,,4 5
(,,5 6
),,6 7
;,,7 8
services-- 
.-- 
AddTransient-- !
<--! "
	TagInsert--" +
>--+ ,
(--, -
)--- .
;--. /
services.. 
... 
AddTransient.. !
<..! "
	TagDelete.." +
>..+ ,
(.., -
)..- .
;... /
services// 
.// 
AddTransient// !
<//! "
TagList//" )
>//) *
(//* +
)//+ ,
;//, -
services00 
.00 
AddTransient00 !
<00! "
	MovieList00" +
>00+ ,
(00, -
)00- .
;00. /
services11 
.11 
AddTransient11 !
<11! "
MovieSelect11" -
>11- .
(11. /
)11/ 0
;110 1
services22 
.22 
	AddScoped22 
<22 
IRepository22 *
,22* +

Repository22, 6
>226 7
(227 8
)228 9
;229 :
services33 
.33 
	AddScoped33 
<33 
	IUserInfo33 (
,33( )
UserInfo33* 2
>332 3
(333 4
)334 5
;335 6
services44 
.44 
TryAddSingleton44 $
<44$ % 
IHttpContextAccessor44% 9
,449 :
HttpContextAccessor44; N
>44N O
(44O P
)44P Q
;44Q R
services55 
.55 
AddRazorPages55 "
(55" #
)55# $
;55$ %
services66 
.66 
AddControllers66 #
(66# $
)66$ %
;66% &
services77 
.77 
AddSwaggerGen77 "
(77" #
)77# $
;77$ %
services88 
.88 
ConfigureSwaggerGen88 (
(88( )
options88) 0
=>881 3
{99 
options:: 
.:: 
CustomSchemaIds:: '
(::' (
x::( )
=>::* ,
x::- .
.::. /
FullName::/ 7
)::7 8
;::8 9
};; 
);; 
;;; 
services<< 
.<< 
AddDbContext<< !
<<<! "
ApplicationContext<<" 4
><<4 5
(<<5 6
)<<6 7
;<<7 8
services== 
.== 
AddCors== 
(== 
options== $
=>==% '
{>> 
options?? 
.?? 
	AddPolicy?? !
(??! "
$str??" ,
,??, -
p??. /
=>??0 2
{@@ 
pAA 
.AA 
AllowAnyOriginAA $
(AA$ %
)AA% &
.BB 
AllowAnyHeaderBB '
(BB' (
)BB( )
.CC 
AllowAnyMethodCC '
(CC' (
)CC( )
;CC) *
}DD 
)DD 
;DD 
}EE 
)EE 
;EE 
servicesGG 
.GG 
AddAuthenticationGG &
(GG& '
JwtBearerDefaultsGG' 8
.GG8 9 
AuthenticationSchemeGG9 M
)GGM N
.HH 
AddJwtBearerHH 
(HH 
optionsHH %
=>HH& (
{II 
optionsJJ 
.JJ %
TokenValidationParametersJJ 5
=JJ6 7
newJJ8 ;%
TokenValidationParametersJJ< U
{KK 
ValidateIssuerLL &
=LL' (
trueLL) -
,LL- .
ValidateAudienceMM (
=MM) *
trueMM+ /
,MM/ 0
ValidateLifetimeNN (
=NN) *
trueNN+ /
,NN/ 0$
ValidateIssuerSigningKeyOO 0
=OO1 2
trueOO3 7
,OO7 8
ValidIssuerPP #
=PP$ %
ConfigurationPP& 3
[PP3 4
$strPP4 @
]PP@ A
,PPA B
ValidAudienceQQ %
=QQ& '
ConfigurationQQ( 5
[QQ5 6
$strQQ6 B
]QQB C
,QQC D
IssuerSigningKeyRR (
=RR) *
newRR+ . 
SymmetricSecurityKeyRR/ C
(RRC D
EncodingRRD L
.RRL M
UTF8RRM Q
.RRQ R
GetBytesRRR Z
(RRZ [
ConfigurationRR[ h
[RRh i
$strRRi r
]RRr s
)RRs t
)RRt u
}SS 
;SS 
}TT 
)TT 
;TT 
servicesVV 
.VV 
AddSpaStaticFilesVV &
(VV& '
configurationVV' 4
=>VV5 7
{WW 
configurationXX 
.XX 
RootPathXX &
=XX' (
$strXX) 9
;XX9 :
}YY 
)YY 
;YY 
servicesZZ 
.ZZ 
AddMvcZZ 
(ZZ 
)ZZ 
;ZZ 
}[[ 	
public]] 
void]] 
	Configure]] 
(]] 
IApplicationBuilder]] 1
app]]2 5
,]]5 6
IWebHostEnvironment]]7 J
env]]K N
)]]N O
{^^ 	
if__ 
(__ 
env__ 
.__ 
IsDevelopment__ !
(__! "
)__" #
)__# $
{`` 
appaa 
.aa %
UseDeveloperExceptionPageaa -
(aa- .
)aa. /
;aa/ 0
}bb 
elsecc 
{dd 
appee 
.ee 
UseExceptionHandleree '
(ee' (
$stree( 0
)ee0 1
;ee1 2
appff 
.ff 
UseHstsff 
(ff 
)ff 
;ff 
}gg 
appii 
.ii 
UseHttpsRedirectionii #
(ii# $
)ii$ %
;ii% &
appjj 
.jj 
UseStaticFilesjj 
(jj 
)jj  
;jj  !
appll 
.ll 

UseRoutingll 
(ll 
)ll 
;ll 
appnn 
.nn 
UseAuthorizationnn  
(nn  !
)nn! "
;nn" #
apppp 
.pp 

UseSwaggerpp 
(pp 
)pp 
;pp 
appqq 
.qq 
UseSwaggerUIqq 
(qq 
)qq 
;qq 
apprr 
.rr 
UseCorsrr 
(rr 
$strrr "
)rr" #
;rr# $
appss 
.ss 
UseEndpointsss 
(ss 
	endpointsss &
=>ss' )
{tt 
	endpointsuu 
.uu 
MapControllersuu (
(uu( )
)uu) *
;uu* +
}vv 
)vv 
;vv 
appxx 
.xx 
UseEndpointsxx 
(xx 
	endpointsxx &
=>xx' )
{xx* +
	endpointsxx, 5
.xx5 6
MapRazorPagesxx6 C
(xxC D
)xxD E
;xxE F
}xxG H
)xxH I
;xxI J
appyy 
.yy 
UseAuthenticationyy !
(yy! "
)yy" #
;yy# $
}{{ 	
}|| 
}}} 